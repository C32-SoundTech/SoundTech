# 登录功能测试用例文档

### 1. 登录页面加载测试
- **测试ID**: T-LOGIN-01
- **测试目的**: 验证登录页面是否正常加载
- **前置条件**: 应用程序正常运行
- **测试步骤**:
  1. 访问 `/login` 路由
- **预期结果**:
  1. 返回状态码 200
  2. 页面内容包含"登录"字样
- **测试类型**: 功能测试

### 2. 正常登录流程测试
- **测试ID**: T-LOGIN-02
- **测试目的**: 验证用户提供正确的用户名和密码时是否成功登录
- **前置条件**: 应用程序正常运行，login_util 函数可用
- **测试步骤**:
  1. 向 `/login` 路由发送 POST 请求，包含:
     - username: "testuser"
     - password: "password123"
- **预期结果**:
  1. login_util 函数被调用一次，参数为 "testuser"
  2. 页面重定向到主页面
  3. 会话中包含用户ID
- **测试类型**: 功能测试

### 3. 空用户名测试
- **测试ID**: T-LOGIN-03
- **测试目的**: 验证当用户名为空时的错误处理
- **前置条件**: 应用程序正常运行
- **测试步骤**:
  1. 向 `/login` 路由发送 POST 请求，包含:
     - username: ""
     - password: "password123"
- **预期结果**:
  1. 页面显示"用户名和密码不能为空"错误消息
- **测试类型**: 验证测试

### 4. 空密码测试
- **测试ID**: T-LOGIN-04
- **测试目的**: 验证当密码为空时的错误处理
- **前置条件**: 应用程序正常运行
- **测试步骤**:
  1. 向 `/login` 路由发送 POST 请求，包含:
     - username: "testuser"
     - password: ""
- **预期结果**:
  1. 页面显示"用户名和密码不能为空"错误消息
- **测试类型**: 验证测试

### 5. 用户名或密码错误测试
- **测试ID**: T-LOGIN-05
- **测试目的**: 验证当用户名或密码错误时的错误处理
- **前置条件**: 应用程序正常运行，login_util 函数返回用户信息
- **测试步骤**:
  1. 向 `/login` 路由发送 POST 请求，包含:
     - username: "testuser"
     - password: "wrongpassword"
- **预期结果**:
  1. 页面显示"登录失败，用户名或密码错误"错误消息
- **测试类型**: 功能测试

### 6. 用户不存在测试
- **测试ID**: T-LOGIN-06
- **测试目的**: 验证当用户不存在时的错误处理
- **前置条件**: 应用程序正常运行，login_util 函数返回 None
- **测试步骤**:
  1. 向 `/login` 路由发送 POST 请求，包含:
     - username: "nonexistentuser"
     - password: "password123"
- **预期结果**:
  1. 页面显示"登录失败，用户名或密码错误"错误消息
- **测试类型**: 功能测试

### 7. 重定向功能测试
- **测试ID**: T-LOGIN-07
- **测试目的**: 验证登录后是否正确重定向到 next 参数指定的页面
- **前置条件**: 应用程序正常运行，login_util 函数返回用户信息
- **测试步骤**:
  1. 向 `/login?next=/profile` 路由发送 POST 请求，包含:
     - username: "testuser"
     - password: "password123"
- **预期结果**:
  1. 页面重定向到 "/profile" 页面
- **测试类型**: 功能测试